{% extends "base.html" %}
{% from 'utils.html' import render_icon %}

{% block app_content %}
  <div class="container">
    <button class="btn btn-sm btn-success fw-500 d-print-none"
            type="button"
            data-bs-toggle="modal"
            data-bs-target="#modal"
            data-form="base_field"
            data-modal="new">✚ New</button>
    <p class="my-2">List of base fields</p>
    {% for base_field in base_fields %}
      <div class="accordion">
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#base{{ loop.index }}"
                    data-id="{{ base_field.id }}">
              <strong>
                {{ "{prefix:02}-{suffix} {name}".format(prefix=base_field.prefix, suffix=base_field.suffix, name=base_field.name) }}
              </strong>
              <div class="btn-edit ms-2"
                   data-bs-toggle="modal"
                   data-bs-target="#modal"
                   data-form="base_field"
                   data-modal="edit"
                   data-id="{{ base_field.id }}">{{ render_icon("pencil-square", extra_classes="color-green") }}</div>
            </button>
          </h2>
          <div class="accordion-collapse collapse" id="base{{ loop.index }}">
            <div class="accordion-body pt-0">
              {% include "_fields_field.html" %}
              <button class="btn btn-sm btn-success fw-500 d-print-none"
                      type="button"
                      data-bs-toggle="modal"
                      data-bs-target="#modal"
                      data-form="field"
                      data-modal="new"
                      data-id="{{ base_field.id }}">✚ New</button>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

{% endblock app_content %}
