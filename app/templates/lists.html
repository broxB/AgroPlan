{% extends "base.html" %}
{% from "utils.html" import render_field %}

{% block styles %}
  {{ super() }}
  <!-- DataTable with JQuery and extensions -->
  <link href="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-2.3.6/b-3.2.6/b-print-3.2.6/cc-1.2.0/fh-4.0.5/datatables.min.css"
        rel="stylesheet"
        integrity="sha384-+pr02tT3p2n4hAZeTJc1mRe9Q2cLhRlpEXalMwCs5oX9JipWZfkFnwHfkftpVTHh"
        crossorigin="anonymous">

  <script src="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-2.3.6/b-3.2.6/b-print-3.2.6/cc-1.2.0/fh-4.0.5/datatables.min.js"
          integrity="sha384-/Jv91OhP2rIK8M4RTq0Ehr7iY5NdWzkfFKfKS+PGuIgiBrZydoSwm4zcmWsZ+i6v"
          crossorigin="anonymous"></script>
{% endblock styles %}

{% block app_content %}
  <div class="container-fluid d-print-none">
    <form id="listForm">
      {{ render_field(form.csrf_token) }}
      <div class="row">
        <div class="col-xxl-3 col-xl-4 col-lg-5 col-md-6 col-sm-12"
             hx-post="{{ url_for('main.update_listform') }}"
             hx-target="#list-table"
             hx-trigger="change">{{ render_field(form.list_type) }}</div>
        {# <div class="col-xxl-3 col-xl-4 col-lg-5 col-md-6 col-sm-12">{{ render_field(form.item_type) }}</div> #}
        <div class="col-xxl-3 col-xl-4 col-lg-5 col-md-6 col-sm-12"
             hx-post="{{ url_for('main.update_listform') }}"
             hx-target="#list-table"
             hx-trigger="change">{{ render_field(form.year) }}</div>
      </div>

      <div class="row">
        <div class="col-xxl-3 col-md-4 col-sm-12">
          <div class="row" id="list-fields">
            {{ render_field(form.fields, attributes={"multiselect-max-items":15, "multiselect-hide-x":false}) }}
          </div>
        </div>
        <div class="col-xxl-3 col-md-4 col-sm-12">
          <div class="row" id="list-crops">
            {{ render_field(form.crops, attributes={"multiselect-select-all":false, "multiselect-search":false}) }}
          </div>
        </div>
        <div class="col-xxl-3 col-md-4 col-sm-12">
          <div class="row" id="list-fertilizers">
            {{ render_field(form.fertilizers, attributes={"multiselect-select-all":false}) }}
          </div>
        </div>
      </div>

      <div class="row pt-2">
        <div class="col">
          <button class="btn btn-primary btn-md"
                  type="button"
                  hx-post="{{ url_for('main.create_list') }}"
                  hx-trigger="click"
                  hx-target="#list-table"
                  hx-swap="innerHTML">HTMX</button>
        </div>
      </div>
    </form>
  </div>
  <div class="container-fluid" id="list-table"></div>
  <script src="{{url_for('static', filename='multiselect-dropdown/multiselect-dropdown.js')}}"></script>
{% endblock app_content %}
