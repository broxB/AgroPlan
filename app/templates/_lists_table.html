{% if list %}
  <table class="table nowrap" id="listsTable">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Field</th>
        <th scope="col">Ha</th>
        <th scope="col">Crop</th>
        <th scope="col">Fertilizer</th>
        <th scope="col">Measure</th>
        <th scope="col">{{ unit }}</th>
      </tr>
    </thead>
    <tbody>
      {% for fertilization in list %}
        <tr>
          <th scope="row">{{ loop.index }}</th>
          <td>
            <a class="text-reset text-decoration-none"
               href="{{ url_for('main.field', id=fertilization.field.id) }}">
              {{ "{prefix:02}-{suffix} {name}".format(prefix=fertilization.field.base_field.prefix, suffix=fertilization.field.base_field.suffix, name=fertilization.field.base_field.name) }}
            </a>
          </td>
          <td>{{ fertilization.field.area }}</td>
          <td>{{ fertilization.cultivation.crop.name }}</td>
          <td>{{ fertilization.fertilizer.name }}</td>
          <td>{{ fertilization.measure }}</td>
          <td>{{ fertilization.amount }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <script type="text/javascript">
    htmx.onLoad(function(content) {
      $("#listsTable").DataTable( {
        // for production, page reload needed
        {# retrieve: true, #}
        // for development, no page reload
        destroy: true,

        scrollX: true,
        {# scrollY: "35vh", #}
        {# paging: false, #}
        columnControl: ["order",
          [
            {# "orderAsc", "orderDesc", "orderClear", #}
            {# "spacer", #}
            'searchList'
          ]
        ],
        columnDefs: [
          {
            targets: 0,
            columnControl: ["order"]
          },
          {
            targets: [2, -1],
            columnControl: ["order", ["search"]]
          },
        ],
        {# fixedHeader: true, #}
        ordering: {
          indicators: false,
          handlers: false,
        },
        layout: {
          bottomStart: null,
          bottomEnd: null,
          bottom: [
            {
              pageLength: {
                menu: [ 10, 25, 50, 200 ]
              }
            },
            "info",
            {
              paging: {
                type: "numbers"
                {# buttons: 1, #}
                {# boundaryNumbers: false #}
              }
            },
          ],
          topStart: "search",
          topEnd: {
            buttons: [
              {
                extend: 'print',
                text: 'üñ®Ô∏è',
                title: "D√ºngung",
                autoPrint: false,
                exportOptions: {
                  columns: ':visible',
                },
                customize: function (win) {
                  $(win.document.body).find('table').addClass('display').css('font-size', '9px');
                  $(win.document.body).find('tr:nth-child(odd) td').each(function(index){
                      $(this).css('background-color','#D0D0D0');
                  });
                  $(win.document.body).find('h1').css('text-align','center');
                }
              }
            ]
          }
        },
      })

    });
  </script>
{% else %}
  <p>Nothing found.</p>
{% endif %}
